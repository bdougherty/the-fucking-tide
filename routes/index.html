<svelte:head>
	<title>The Fucking Tide</title>
</svelte:head>

{#if $findingLocation}
	<LoadingMessage>Finding your fucking location</LoadingMessage>
{:elseif $locationError}
	<Search on:search="$geocode(event.searchText)" />
{:elseif $fetchingPredictions}
	<LoadingMessage>Checking the fucking tide</LoadingMessage>
{:elseif $predictionError}
	<ErrorMessage error={$predictionError} />
{:else}
	<TideMessage station={$stationName} progress={$tideProgress} nextTide={$nextTide} />
{/if}

<script>
	import LoadingMessage from '../components/LoadingMessage.html';
	import ErrorMessage from '../components/ErrorMessage.html';
	import TideMessage from '../components/TideMessage.html';
	import Search from '../components/Search.html';

	export default {
		components: {
			LoadingMessage,
			ErrorMessage,
			TideMessage,
			Search
		},
		oncreate() {
			const { location } = this.store.get();

			if (!location) {
				this.store.getGeolocation();
			}
		}
	};
</script>
